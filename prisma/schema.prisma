generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

// Shopping Example

model ShoppingArticle {
  id          String  @id @default(cuid())
  cart_id     String
  cart        ShoppingCart @relation(fields: [cart_id], references: [id], onDelete: Cascade)
  label       String
  quantity    Int
  price       Int
  recipient   String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@index([cart_id])
}

enum CartPermission {
  OWNER
  MEMBER
}

model ShoppingMember {
  id          String  @id @default(cuid())
  user_id     String
  cart_id     String
  cart        ShoppingCart @relation(fields: [cart_id], references: [id], onDelete: Cascade)
  permission  CartPermission
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@index([cart_id])
}

model ShoppingCart {
  id          String  @id @default(cuid())
  label       String
  articles     ShoppingArticle[]
  members      ShoppingMember[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ShoppingContext {
  user_id     String
  hash        String?
  @@id([user_id])
}
