generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

// Monster Hunter World Iceborn Example

enum MHWIMonsterSpecies {
  Anjanath
  Barroth
  Bazelgeuse
  Behemoth
  Deviljho
  Diablos
  BlackDiablos
  Dodogama
  GreatGirros
  GreatJagras
  Jyuratidus
  Kirin
  KuluYaKu
  KulveTaroth
  KushalaDaora
  Lavasioth
  Legiana
  OldLeshen
  Lunastra
  Nergigante
  Odogaron
  Paolumu
  PukeiPukei
  Radobaan
  Rathalos
  AzurRathalos
  Rathian
  PinkRathian
  Teostra
  TobiKadashi
  TzitziYaKu
  Uragaan
  VaalHazak
  Leshen
  XenoJiva
  ZorahMagdaros
  Banbaro
  Beotodus
  TobiKadashiViper
  PaolumuBelladone
  Barioth
  Nargacuga
  Glavenus
  Tigrex
  Brachydios
  ShriekingLegiana
  FulgurAnjanath
  AcidicGlavenus
  EbonyOdogaron
  Velkhana
  SeethingBazelgeuse
  BlackveilVaalHazak
  Namielle
  SavageDeviljho
  RuinerNergigante
  SharaIshvalda
  Zinogre
  YianGaruga
  ScarredYianGaruga
  GoldRathian
  SilverRathalos
  BruteTigrex
  CoralPukeiPukei
  StygianZinogre
  Rajang
  FuriousRajang
  FrostfangBarioth
  RagingBrachydios
  SafiJiva
  Alatreon
  Fatalis
  HellbladeGlavenus
  GreenNargacuga
  CrimsonFatalis
  WhiteFatalis
  Abiogladius
}

enum MHWIMonsterStrength {
  Normal
  Tempered
  AlphaTempered
}

model MHWIMonsterKill {
  id          String  @id @default(cuid())
  user_id     String
  kill_time   BigInt
  monster     MHWIMonsterSpecies
  strength    MHWIMonsterStrength
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model MHWIMonsterKillTeam {
  id          String  @id @default(cuid())
  kill_time   BigInt
  monster     MHWIMonsterSpecies
  strength    MHWIMonsterStrength
  members MHWITeamMembers[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model MHWITeamMembers {
  user_id     String
  monsterKillTeamId String
  monsterKillTeam MHWIMonsterKillTeam @relation(fields: [monsterKillTeamId], references: [id], onDelete: Cascade)
  @@id([user_id, monsterKillTeamId])
  @@index([monsterKillTeamId])
}

model MHWITopRoles {
  guild_id    String @id
  first_id      String
  second_id      String
  third_id      String
}

model MHWISeasons {
  id          Int  @id @default(autoincrement())
  startedAt   DateTime
}

// Shopping Example

model ShoppingArticle {
  id          String  @id @default(cuid())
  cart_id     String
  cart        ShoppingCart @relation(fields: [cart_id], references: [id], onDelete: Cascade)
  label       String
  quantity    Int
  price       Int
  recipient   String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@index([cart_id])
}

enum CartPermission {
  OWNER
  MEMBER
}

model ShoppingMember {
  id          String  @id @default(cuid())
  user_id     String
  cart_id     String
  cart        ShoppingCart @relation(fields: [cart_id], references: [id], onDelete: Cascade)
  permission  CartPermission
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@index([cart_id])
}

model ShoppingCart {
  id          String  @id @default(cuid())
  label       String
  articles     ShoppingArticle[]
  members      ShoppingMember[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ShoppingContext {
  user_id     String
  hash        String?
  @@id([user_id])
}
